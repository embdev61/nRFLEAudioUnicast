@echo off
cd /D C:\ncs\v2.9.0\nrf\applications\nrf5340_audio\build\nrf5340_audio\zephyr || (set FAIL_LINE=2& goto :ABORT)
C:\ncs\toolchains\b620d30767\opt\bin\cmake.exe -E make_directory edk/include/generated/zephyr || (set FAIL_LINE=3& goto :ABORT)
C:\ncs\toolchains\b620d30767\opt\bin\python.exe C:/ncs/v2.9.0/zephyr/scripts/build/gen_syscalls.py --json-file C:/ncs/v2.9.0/nrf/applications/nrf5340_audio/build/nrf5340_audio/zephyr/misc/generated/syscalls.json --base-output edk/include/generated/zephyr/syscalls --syscall-dispatch edk/include/generated/zephyr/syscall_dispatch.c --syscall-list C:/ncs/v2.9.0/nrf/applications/nrf5340_audio/build/nrf5340_audio/zephyr/edk/include/generated/zephyr/syscall_list.h --split-type k_timeout_t --split-type k_ticks_t || (set FAIL_LINE=4& goto :ABORT)
C:\ncs\toolchains\b620d30767\opt\bin\cmake.exe -DPROJECT_BINARY_DIR=C:/ncs/v2.9.0/nrf/applications/nrf5340_audio/build/nrf5340_audio/zephyr -DAPPLICATION_SOURCE_DIR=C:/ncs/v2.9.0/nrf/applications/nrf5340_audio -DINTERFACE_INCLUDE_DIRECTORIES="C:/ncs/v2.9.0/nrf/applications/nrf5340_audio/build/nrf5340_audio/zephyr/include/generated/zephyr C:/ncs/v2.9.0/zephyr/include C:/ncs/v2.9.0/nrf/applications/nrf5340_audio/build/nrf5340_audio/zephyr/include/generated C:/ncs/v2.9.0/zephyr/soc/nordic C:/ncs/v2.9.0/zephyr/lib/libc/newlib/include C:/ncs/v2.9.0/zephyr/lib/libc/common/include C:/ncs/v2.9.0/zephyr/lib/posix/options/getopt/ C:/ncs/v2.9.0/zephyr/soc/nordic/nrf53/. C:/ncs/v2.9.0/zephyr/soc/nordic/common/. C:/ncs/v2.9.0/zephyr/subsys/bluetooth C:/ncs/v2.9.0/zephyr/subsys/settings/include C:/ncs/v2.9.0/zephyr/subsys/shell/modules/kernel_service/thread/../ C:/ncs/v2.9.0/nrf/include C:/ncs/v2.9.0/nrf/lib/contin_array/. C:/ncs/v2.9.0/nrf/lib/pcm_mix/. C:/ncs/v2.9.0/nrf/tests/include C:/ncs/v2.9.0/modules/hal/cirrus-logic C:/ncs/v2.9.0/modules/hal/cirrus-logic/common C:/ncs/v2.9.0/modules/hal/cirrus-logic/common/bridge C:/ncs/v2.9.0/modules/hal/cirrus-logic/common/platform_bsp C:/ncs/v2.9.0/modules/hal/cirrus-logic/cs47l63 C:/ncs/v2.9.0/modules/hal/cirrus-logic/cs47l63/bsp C:/ncs/v2.9.0/modules/hal/cirrus-logic/cs47l63/config C:/ncs/v2.9.0/modules/hal/cirrus-logic/cs47l63/fw_pt C:/ncs/v2.9.0/modules/hal/cirrus-logic/cs47l63/generated C:/ncs/v2.9.0/modules/hal/cmsis/CMSIS/Core/Include C:/ncs/v2.9.0/zephyr/modules/cmsis/. C:/ncs/v2.9.0/modules/lib/cmsis-dsp/Include C:/ncs/v2.9.0/modules/hal/nordic/nrfx C:/ncs/v2.9.0/modules/hal/nordic/nrfx/drivers/include C:/ncs/v2.9.0/modules/hal/nordic/nrfx/mdk C:/ncs/v2.9.0/zephyr/modules/hal_nordic/nrfx/. C:/ncs/v2.9.0/nrf/applications/nrf5340_audio/build/nrf5340_audio/modules/libmetal/libmetal/lib/include C:/ncs/v2.9.0/modules/lib/open-amp/open-amp/lib/include C:/ncs/v2.9.0/modules/debug/segger/SEGGER C:/ncs/v2.9.0/modules/debug/segger/Config C:/ncs/v2.9.0/modules/crypto/tinycrypt/lib/include C:/ncs/v2.9.0/nrfxlib/softdevice_controller/include C:/ncs/v2.9.0/nrfxlib/lc3/codec/inc C:/ncs/v2.9.0/nrfxlib/lc3/platform/os/inc C:/ncs/v2.9.0/nrfxlib/lc3/platform/os/baremetal/inc C:/ncs/v2.9.0/nrfxlib/lc3/include C:/ncs/v2.9.0/modules/hal/cirrus-logic C:/ncs/v2.9.0/modules/hal/cirrus-logic/common C:/ncs/v2.9.0/modules/hal/cirrus-logic/common/bridge C:/ncs/v2.9.0/modules/hal/cirrus-logic/common/platform_bsp C:/ncs/v2.9.0/modules/hal/cirrus-logic/cs47l63 C:/ncs/v2.9.0/modules/hal/cirrus-logic/cs47l63/bsp C:/ncs/v2.9.0/modules/hal/cirrus-logic/cs47l63/config C:/ncs/v2.9.0/modules/hal/cirrus-logic/cs47l63/fw_pt C:/ncs/v2.9.0/modules/hal/cirrus-logic/cs47l63/generated C:/ncs/v2.9.0/nrfxlib/crypto/nrf_cc312_platform/include" -Dllext_edk_file=C:/ncs/v2.9.0/nrf/applications/nrf5340_audio/build/nrf5340_audio/zephyr/llext-edk.tar.xz -Dllext_edk_cflags="-DKERNEL -D__ZEPHYR__=1 -D_ANSI_SOURCE -D__LINUX_ERRNO_EXTENSIONS__ -DUSE_PARTITION_MANAGER=1 -D__PROGRAM_START -DNRF5340_XXAA_APPLICATION -DNRF5340_XXAA_APPLICATION -DNRF_SKIP_FICR_NS_COPY_TO_RAM -DK_HEAP_MEM_POOL_SIZE=4096 -DLL_EXTENSION_BUILD -fno-strict-aliasing -Og -imacros C:/ncs/v2.9.0/nrf/applications/nrf5340_audio/build/nrf5340_audio/zephyr/include/generated/zephyr/autoconf.h -fno-common -fdiagnostics-color=always -mcpu=cortex-m33 -mthumb -mabi=aapcs -mfpu=fpv5-sp-d16 -mfloat-abi=hard -mfp16-format=ieee -imacros C:/ncs/v2.9.0/zephyr/include/zephyr/toolchain/zephyr_stdint.h -Wall -Wformat -Wformat-security -Wformat -Wno-format-zero-length -Wdouble-promotion -Wno-pointer-sign -Wpointer-arith -Wexpansion-to-defined -Wno-unused-but-set-variable -Werror=implicit-int -fno-asynchronous-unwind-tables -fno-reorder-functions --param=min-pagesize=0 -fno-defer-pop -fstack-usage -specs=nano.specs -D_POSIX_THREADS -std=c99 -mlong-calls -mthumb -nodefaultlibs" -Dllext_edk_name=llext-edk -DWEST_TOPDIR=C:/ncs/v2.9.0 -DZEPHYR_BASE=C:/ncs/v2.9.0/zephyr -DCONFIG_LLEXT_EDK_USERSPACE_ONLY= -P C:/ncs/v2.9.0/zephyr/cmake/llext-edk.cmake || (set FAIL_LINE=5& goto :ABORT)
goto :EOF

:ABORT
set ERROR_CODE=%ERRORLEVEL%
echo Batch file failed at line %FAIL_LINE% with errorcode %ERRORLEVEL%
exit /b %ERROR_CODE%